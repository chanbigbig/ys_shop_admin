import{_ as t}from"./u-tabs.be288a3e.js";import{$ as e,p as a,q as s,o as i,c as l,w as o,n as r,i as c,a as n,b as d,d as u,F as m,x as h,k as p,f as _,t as g,e as f,l as b,g as y}from"./index-b2e89937.js";import{r as L}from"./uni-app.es.868efe30.js";import{M as w,_ as T}from"./mescroll-mixins.ac1843d6.js";import{l as x}from"./index.0b2f1ce1.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";const v="article.category/list";const C=I({mixins:[w],data:()=>({tabList:[],curTab:0,categoryId:0,articleList:a(),upOption:{auto:!0,page:{size:15},noMoreSize:3}}),onLoad(t){this.categoryId=t.categoryId||0,this.getCategoryList()},methods:{upCallback(t){const e=this;e.getArticleList(t.num).then((t=>{const a=t.data.length,s=t.data.total;e.mescroll.endBySize(a,s)})).catch((()=>e.mescroll.endErr()))},getCategoryList(){e.get(v).then((t=>{this.setTabList(t.data.list)}))},setTabList(t){const e=this;if(e.tabList=[{value:0,name:"全部"}],t.forEach((t=>{e.tabList.push({value:t.category_id,name:t.name})})),e.categoryId>0){const t=e.tabList.findIndex((t=>t.value==e.categoryId));e.curTab=t>-1?t:0}},getArticleList(t=1){const e=this;return new Promise(((a,i)=>{x({categoryId:e.categoryId,page:t},{load:!1}).then((i=>{const l=i.data.list;e.articleList.data=s(l,e.articleList,t),a(l)})).catch(i)}))},onChangeTab(t){this.curTab=t,this.categoryId=this.tabList[t].value,this.onRefreshList()},onRefreshList(){this.articleList=a(),setTimeout((()=>this.mescroll.resetUpScroll()),120)},onTargetDetail(t){this.$navTo("pages/article/detail",{articleId:t})}},onShareAppMessage(){return{title:"文章首页",path:"/pages/article/index?"+this.$getShareUrlParams()}},onShareTimeline(){return{title:"文章首页",path:"/pages/article/index?"+this.$getShareUrlParams()}}},[["render",function(e,a,s,w,x,I){const v=L(h("u-tabs"),t),C=b,k=c,S=y,j=L(h("mescroll-body"),T);return i(),l(k,{class:"container",style:r(e.appThemeStyle)},{default:o((()=>[n(j,{ref:"mescrollRef",sticky:!0,onInit:e.mescrollInit,down:{use:!1},up:x.upOption,onUp:I.upCallback},{default:o((()=>[n(v,{list:x.tabList,"is-scroll":!0,modelValue:x.curTab,"onUpdate:modelValue":a[0]||(a[0]=t=>x.curTab=t),"active-color":e.appTheme.mainBg,duration:.2,onChange:I.onChangeTab},null,8,["list","modelValue","active-color","duration","onChange"]),n(k,{class:"article-list"},{default:o((()=>[(i(!0),d(m,null,u(x.articleList.data,((t,e)=>(i(),l(k,{class:p(["article-item",[`show-type__${t.show_type}`]]),key:e,onClick:e=>I.onTargetDetail(t.article_id)},{default:o((()=>[10==t.show_type?(i(),d(m,{key:0},[n(k,{class:"article-item__left flex-box"},{default:o((()=>[n(k,{class:"article-item__title"},{default:o((()=>[n(C,{class:"twoline-hide"},{default:o((()=>[_(g(t.title),1)])),_:2},1024)])),_:2},1024),n(k,{class:"article-item__footer m-top10"},{default:o((()=>[n(C,{class:"article-views f-24 col-8"},{default:o((()=>[_(g(t.show_views)+"次浏览",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(k,{class:"article-item__image"},{default:o((()=>[n(S,{class:"image",mode:"widthFix",src:t.image_url},null,8,["src"])])),_:2},1024)],64)):f("",!0),20==t.show_type?(i(),d(m,{key:1},[n(k,{class:"article-item__title"},{default:o((()=>[n(C,{class:"twoline-hide"},{default:o((()=>[_(g(t.title),1)])),_:2},1024)])),_:2},1024),n(k,{class:"article-item__image m-top20"},{default:o((()=>[n(S,{class:"image",mode:"widthFix",src:t.image_url},null,8,["src"])])),_:2},1024),n(k,{class:"article-item__footer m-top10"},{default:o((()=>[n(C,{class:"article-views f-24 col-8"},{default:o((()=>[_(g(t.show_views)+"次浏览",1)])),_:2},1024)])),_:2},1024)],64)):f("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},8,["onInit","up","onUp"])])),_:1},8,["style"])}],["__scopeId","data-v-b9be23db"]]);export{C as default};
